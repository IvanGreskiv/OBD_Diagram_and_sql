-- MySQL Script generated by MySQL Workbench
-- 06/04/14 09:26:21
-- Model: New Model    Version: 1.0
SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `mydb` DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ;
USE `mydb` ;

-- -----------------------------------------------------
-- Table `mydb`.`Медицинские_организации`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Медицинские_организации` (
  `idМедицинские_организации` INT NOT NULL,
  PRIMARY KEY (`idМедицинские_организации`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Больницы`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Больницы` (
  `idБольницы` INT NOT NULL,
  `idМедицинские_организации` INT NOT NULL,
  PRIMARY KEY (`idБольницы`, `idМедицинские_организации`),
  INDEX `fk_Больницы_Медицинские_организа_idx` (`idМедицинские_организации` ASC),
  CONSTRAINT `fk_Больницы_Медицинские_организац1`
    FOREIGN KEY (`idМедицинские_организации`)
    REFERENCES `mydb`.`Медицинские_организации` (`idМедицинские_организации`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Корпуса`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Корпуса` (
  `idКорпуса` INT NOT NULL,
  `Больницы_idБольницы` INT NOT NULL,
  PRIMARY KEY (`idКорпуса`, `Больницы_idБольницы`),
  INDEX `fk_Корпуса_Больницы_idx` (`Больницы_idБольницы` ASC),
  CONSTRAINT `fk_Корпуса_Больницы`
    FOREIGN KEY (`Больницы_idБольницы`)
    REFERENCES `mydb`.`Больницы` (`idБольницы`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Отделения`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Отделения` (
  `idОтделения` INT NOT NULL,
  `Корпуса_idКорпуса` INT NOT NULL,
  `Корпуса_Больницы_idБольницы` INT NOT NULL,
  PRIMARY KEY (`idОтделения`, `Корпуса_idКорпуса`, `Корпуса_Больницы_idБольницы`),
  INDEX `fk_Отделения_Корпуса1_idx` (`Корпуса_idКорпуса` ASC, `Корпуса_Больницы_idБольницы` ASC),
  CONSTRAINT `fk_Отделения_Корпуса1`
    FOREIGN KEY (`Корпуса_idКорпуса` , `Корпуса_Больницы_idБольницы`)
    REFERENCES `mydb`.`Корпуса` (`idКорпуса` , `Больницы_idБольницы`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Персонал`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Персонал` (
  `idПерсонал` INT NOT NULL,
  `Медицинские_организации_idМедицинские_организации` INT NOT NULL,
  `Имя` VARCHAR(45) NULL,
  `Фамилия` VARCHAR(45) NULL,
  `Должность` VARCHAR(45) NULL,
  PRIMARY KEY (`idПерсонал`, `Медицинские_организации_idМедицинские_организации`),
  INDEX `fk_Персонал_Медицинские_организа_idx` (`Медицинские_организации_idМедицинские_организации` ASC),
  CONSTRAINT `fk_Персонал_Медицинские_организац1`
    FOREIGN KEY (`Медицинские_организации_idМедицинские_организации`)
    REFERENCES `mydb`.`Медицинские_организации` (`idМедицинские_организации`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Мед_персонал`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Мед_персонал` (
  `idМед_персонал` INT NOT NULL,
  `Вид работы` VARCHAR(45) NULL,
  `Оклад` VARCHAR(45) NULL,
  `Персонал_idПерсонал` INT NOT NULL,
  `Персонал_Медицинские_организации_idМедицинские_организации` INT NOT NULL,
  PRIMARY KEY (`idМед_персонал`, `Персонал_idПерсонал`, `Персонал_Медицинские_организации_idМедицинские_организации`),
  INDEX `fk_Мед_персонал_Персонал1_idx` (`Персонал_idПерсонал` ASC, `Персонал_Медицинские_организации_idМедицинские_организации` ASC),
  CONSTRAINT `fk_Мед_персонал_Персонал1`
    FOREIGN KEY (`Персонал_idПерсонал` , `Персонал_Медицинские_организации_idМедицинские_организации`)
    REFERENCES `mydb`.`Персонал` (`idПерсонал` , `Медицинские_организации_idМедицинские_организации`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Обслуга`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Обслуга` (
  `idОбслуга` INT NOT NULL,
  `Вид работы` VARCHAR(45) NULL,
  `Оклад` VARCHAR(45) NULL,
  `Персонал_idПерсонал` INT NOT NULL,
  `Персонал_Медицинские_организации_idМедицинские_организации` INT NOT NULL,
  PRIMARY KEY (`idОбслуга`, `Персонал_idПерсонал`, `Персонал_Медицинские_организации_idМедицинские_организации`),
  INDEX `fk_Обслуга_Персонал1_idx` (`Персонал_idПерсонал` ASC, `Персонал_Медицинские_организации_idМедицинские_организации` ASC),
  CONSTRAINT `fk_Обслуга_Персонал1`
    FOREIGN KEY (`Персонал_idПерсонал` , `Персонал_Медицинские_организации_idМедицинские_организации`)
    REFERENCES `mydb`.`Персонал` (`idПерсонал` , `Медицинские_организации_idМедицинские_организации`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Поликлиники`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Поликлиники` (
  `idПоликлиники` INT NOT NULL,
  `Медицинские_организации_idМедицинские_организации` INT NOT NULL,
  `Больницы_idБольницы` INT NOT NULL,
  `idМедицинские_организации` INT NOT NULL,
  PRIMARY KEY (`idПоликлиники`, `Медицинские_организации_idМедицинские_организации`),
  INDEX `fk_Поликлиники_Медицинские_орган_idx` (`Медицинские_организации_idМедицинские_организации` ASC),
  INDEX `fk_Поликлиники_Больницы1_idx` (`Больницы_idБольницы` ASC, `idМедицинские_организации` ASC),
  CONSTRAINT `fk_Поликлиники_Медицинские_органи1`
    FOREIGN KEY (`Медицинские_организации_idМедицинские_организации`)
    REFERENCES `mydb`.`Медицинские_организации` (`idМедицинские_организации`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Поликлиники_Больницы1`
    FOREIGN KEY (`Больницы_idБольницы` , `idМедицинские_организации`)
    REFERENCES `mydb`.`Больницы` (`idБольницы` , `idМедицинские_организации`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Амбулаторное_лечение`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Амбулаторное_лечение` (
  `idАмбулаторное_лечение` INT NOT NULL,
  `Поликлиники_idПоликлиники` INT NOT NULL,
  `Поликлиники_Медицинские_организации_idМедицинские_организации` INT NOT NULL,
  PRIMARY KEY (`idАмбулаторное_лечение`, `Поликлиники_idПоликлиники`, `Поликлиники_Медицинские_организации_idМедицинские_организации`),
  INDEX `fk_Амбулаторное_лечение_Поликлин_idx` (`Поликлиники_idПоликлиники` ASC, `Поликлиники_Медицинские_организации_idМедицинские_организации` ASC),
  CONSTRAINT `fk_Амбулаторное_лечение_Поликлини1`
    FOREIGN KEY (`Поликлиники_idПоликлиники` , `Поликлиники_Медицинские_организации_idМедицинские_организации`)
    REFERENCES `mydb`.`Поликлиники` (`idПоликлиники` , `Медицинские_организации_idМедицинские_организации`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Пациенты`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Пациенты` (
  `idПациенты` INT NOT NULL,
  `Амбулаторное_лечение_idАмбулаторное_лечение` INT NOT NULL,
  `Амбулаторное_лечение_Поликлиники_idПоликлиники` INT NOT NULL,
  `idМедицинские_организации` INT NOT NULL,
  PRIMARY KEY (`idПациенты`, `Амбулаторное_лечение_idАмбулаторное_лечение`, `Амбулаторное_лечение_Поликлиники_idПоликлиники`, `idМедицинские_организации`),
  INDEX `fk_Пациенты_Амбулаторное_лечение_idx` (`Амбулаторное_лечение_idАмбулаторное_лечение` ASC, `Амбулаторное_лечение_Поликлиники_idПоликлиники` ASC, `idМедицинские_организации` ASC),
  CONSTRAINT `fk_Пациенты_Амбулаторное_лечение1`
    FOREIGN KEY (`Амбулаторное_лечение_idАмбулаторное_лечение` , `Амбулаторное_лечение_Поликлиники_idПоликлиники` , `idМедицинские_организации`)
    REFERENCES `mydb`.`Амбулаторное_лечение` (`idАмбулаторное_лечение` , `Поликлиники_idПоликлиники` , `Поликлиники_Медицинские_организации_idМедицинские_организации`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Стационарное_лечение`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Стационарное_лечение` (
  `idСтационарное_лечение` INT NOT NULL,
  `Больницы_idБольницы` INT NOT NULL,
  `Больницы_Медицинские_организации_idМедицинские_организации` INT NOT NULL,
  `Пациенты_idПациенты` INT NOT NULL,
  `Пациенты_Амбулаторное_лечение_idАмбулаторное_лечение` INT NOT NULL,
  `Пациенты_Амбулаторное_лечение_Поликлиники_idПоликлиники` INT NOT NULL,
  `idМедицинские_организации` INT NOT NULL,
  PRIMARY KEY (`idСтационарное_лечение`, `Больницы_idБольницы`, `Больницы_Медицинские_организации_idМедицинские_организации`, `Пациенты_idПациенты`, `Пациенты_Амбулаторное_лечение_idАмбулаторное_лечение`, `Пациенты_Амбулаторное_лечение_Поликлиники_idПоликлиники`, `idМедицинские_организации`),
  INDEX `fk_Стационарное_лечение_Больницы_idx` (`Больницы_idБольницы` ASC, `Больницы_Медицинские_организации_idМедицинские_организации` ASC),
  INDEX `fk_Стационарное_лечение_Пациенты_idx` (`Пациенты_idПациенты` ASC, `Пациенты_Амбулаторное_лечение_idАмбулаторное_лечение` ASC, `Пациенты_Амбулаторное_лечение_Поликлиники_idПоликлиники` ASC, `idМедицинские_организации` ASC),
  CONSTRAINT `fk_Стационарное_лечение_Больницы1`
    FOREIGN KEY (`Больницы_idБольницы` , `Больницы_Медицинские_организации_idМедицинские_организации`)
    REFERENCES `mydb`.`Больницы` (`idБольницы` , `idМедицинские_организации`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Стационарное_лечение_Пациенты1`
    FOREIGN KEY (`Пациенты_idПациенты` , `Пациенты_Амбулаторное_лечение_idАмбулаторное_лечение` , `Пациенты_Амбулаторное_лечение_Поликлиники_idПоликлиники` , `idМедицинские_организации`)
    REFERENCES `mydb`.`Пациенты` (`idПациенты` , `Амбулаторное_лечение_idАмбулаторное_лечение` , `Амбулаторное_лечение_Поликлиники_idПоликлиники` , `idМедицинские_организации`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Лаборатории`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Лаборатории` (
  `idЛаборатории` INT NOT NULL,
  PRIMARY KEY (`idЛаборатории`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Договоры`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Договоры` (
  `idДоговоры` INT NOT NULL,
  `Лаборатории_idЛаборатории` INT NOT NULL,
  `Медицинские_организации_idМедицинские_организации` INT NOT NULL,
  PRIMARY KEY (`idДоговоры`, `Лаборатории_idЛаборатории`, `Медицинские_организации_idМедицинские_организации`),
  INDEX `fk_Договоры_Лаборатории1_idx` (`Лаборатории_idЛаборатории` ASC),
  INDEX `fk_Договоры_Медицинские_организа_idx` (`Медицинские_организации_idМедицинские_организации` ASC),
  CONSTRAINT `fk_Договоры_Лаборатории1`
    FOREIGN KEY (`Лаборатории_idЛаборатории`)
    REFERENCES `mydb`.`Лаборатории` (`idЛаборатории`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Договоры_Медицинские_организац1`
    FOREIGN KEY (`Медицинские_организации_idМедицинские_организации`)
    REFERENCES `mydb`.`Медицинские_организации` (`idМедицинские_организации`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
